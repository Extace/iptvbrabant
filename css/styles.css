*{margin:0;padding:0;box-sizing:border-box}
/* Theme variables */
:root {
  --color-bg:#0f172a;
  --color-surface:#1e293b;
  --color-surface-alt:#24334b;
  --color-border:#334155;
  --color-text:#f1f5f9;
  --color-text-muted:#cbd5e1;
  --color-primary:#3b82f6;
  --color-primary-hover:#2563eb;
  --color-accent:#10b981;
  --color-warn-bg:#fef3c7;
  --color-warn-border:#f59e0b;
  --color-success-bg:#f0fdf4;
  --color-success-border:#10b981;
  --logo-surface:#ffffff;
}
body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
  background:var(--color-bg);
  color:var(--color-text);
  line-height:1.6;
  min-height:100vh;
  display:block;
  padding:24px;
}
.container{
  max-width:560px;
  width:100%;
  margin:0 auto;
  background:var(--color-surface);
  border-radius:32px;
  overflow:hidden;
  border:1px solid var(--color-border);
  box-shadow:0 8px 30px rgba(0,0,0,0.4)
}
/* Constrain and center form and input fields so they don't stretch too wide on desktop */
#form {
  width:100%;
  max-width:760px; /* limit the form width */
  margin:0 auto; /* center inside the container */
}
#form label { max-width:720px; margin:0 auto 6px; display:block }
#form input[type="text"],
#form input[type="email"],
#form input[type="tel"],
#form input[type="number"],
#form select,
#form textarea {
  width:100%;
  max-width:720px;
  margin:0 auto 12px; /* center each control and add spacing */
  box-sizing:border-box;
}
.header{
  background:var(--color-primary);
  color:white;
  padding:32px 28px;
  text-align:center;
  border-radius:32px 32px 0 0
}
.header h1{font-size:2.2rem;font-weight:800;letter-spacing:1px;color:#ffffff}
@media(max-width:480px){.header h1{font-size:1.8rem}}
.content{padding:40px 32px 48px;display:none}
.content.active{display:block}
.back-btn{
  position:absolute;top:16px;left:16px;
  background:#64748b;color:white;padding:10px 16px;
  border:none;border-radius:16px;font-size:1rem;cursor:pointer
}
.back-btn:hover{background:#475569}
.referral-text{
  text-align:center;
  margin:0 auto 40px;
  max-width:520px;
  font-weight:700;
  color:#ffffff;
  font-size:1.4rem;
  background:linear-gradient(90deg,#60a5fa,#3b82f6);
  padding:28px 24px;
  border-radius:24px;
  line-height:1.6;
  border:0;
  box-shadow:0 8px 24px rgba(59,130,246,0.18)
}
.referral-text strong{font-size:1.7rem;color:#ffffff}
.logo-slider{
  width:100%;
  padding:32px 0;
  background:var(--logo-surface); /* keep logos crisp on neutral surface */
  border-radius:24px;
  margin:2px 0;
  overflow:hidden
}
.logo-slider .swiper-slide{
  display:flex;
  justify-content:center;
  align-items:center;
  height:90px;
  padding:0 16px
}
.logo-slider img{
  width:100px;
  height:50px;
  object-fit:contain;
  transition:transform .3s ease,opacity .3s ease;
  opacity:.95
}
.logo-slider img:hover{
  transform:scale(1.15);
  opacity:1
}
@media (max-width:480px){
  .logo-slider .swiper-slide{height:70px;padding:0 10px}
  .logo-slider img{width:80px;height:40px}
}
.submit-btn{
  display:block;
  width:100%;
  padding:16px 20px;
  border:none;
  border-radius:14px;
  font-size:1.15rem;
  font-weight:600;
  cursor:pointer;
  transition:background .25s ease, transform .25s ease;
  margin:14px auto 0;
  max-width:360px;
  text-align:center
}
.submit-btn:first-of-type{
  background:#3b82f6;
  color:white
}
.submit-btn:first-of-type:hover{
  background:#2563eb;
  transform:translateY(-2px)
}
.submit-btn + .submit-btn{
  background:#64748b;
  color:white;
  margin-top:12px
}
.submit-btn + .submit-btn:hover{
  background:#475569;
  transform:translateY(-2px)
}
.section{margin-bottom:32px}
.section h2{font-size:1.5rem;color:#3b82f6;margin-bottom:20px;font-weight:700}
/* Subtle panel background for form sections */
.panel{
  background:linear-gradient(180deg,rgba(59,130,246,0.04),rgba(59,130,246,0.02));
  border:1px solid rgba(59,130,246,0.12);
  padding:20px 20px 8px;
  border-radius:16px;
}
@media (min-width:1024px){
  #form.form-grid .panel{padding:20px 20px 8px;}
}
label{display:block;margin:12px 0 8px;font-weight:600;color:#1e293b;font-size:1.1rem}
/* Form controls: exclude checkboxes/radios to avoid breaking product rows */
input:not([type="checkbox"]):not([type="radio"]), select, textarea{
  width:100%;
  padding:12px 14px;
  border:1px solid var(--color-border);
  border-radius:10px;
  font-size:1rem;
  background:#ffffff;
  color:#1e293b;
  transition:border-color .25s, box-shadow .25s;
}
input:focus,select:focus,textarea:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 2px rgba(59,130,246,.25)}
.checkbox-group{display:flex;align-items:center;gap:12px;margin:12px 0}
.checkbox-group input{width:auto}
.device-item{
  background:var(--color-surface-alt);
  border:1px solid var(--color-border);
  border-radius:14px;
  padding:10px 16px; /* reduced height */
  margin:12px 0;
  transition:border-color .25s, background .25s;
  display:block;
}
.device-item:hover{border-color:var(--color-primary)}
.product-row{display:flex;align-items:center;gap:10px;min-height:40px}
.product-row input[type=checkbox]{margin:0 2px 0 0;transform:translateY(1px);flex-shrink:0}
.product-row .device-name{flex:1;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:0.95rem}
.product-row .count-input.inline{margin-left:4px}
.product-row .price{margin:0;line-height:1}
.product-row .info-wrapper{margin-left:6px;flex-shrink:0}
.device-item{position:relative}
.device-item.selected{border-color:var(--color-primary);background:rgba(59,130,246,0.06)}
.device-item input[type=checkbox]:checked ~ .device-name{color:var(--color-primary)}
.product-row input[type=checkbox]{flex-shrink:0}
.product-row .count-input{flex-shrink:0}
.product-row .info-wrapper{flex-shrink:0}

/* hide old bottom layout containers when using compact row */

.device-top{display:flex;align-items:center;gap:12px;flex-wrap:nowrap}
.device-name{font-weight:600;font-size:1.05rem;color:#1e293b;flex:1}
.device-bottom{display:flex;justify-content:space-between;align-items:center;gap:12px}
.count-input{display:flex;align-items:center;gap:6px;font-size:0.82rem;margin-top:0}
.count-input.inline{margin-top:0}
.count-input input{width:68px;padding:6px 8px;background:#ffffff;border:1px solid #e2e8f0;color:#1e293b;border-radius:10px;font-size:0.85rem}
.price{color:var(--color-accent);font-weight:600;font-size:1.05rem}
.total-box{
  background:var(--color-success-bg);
  border:2px solid var(--color-success-border);
  padding:20px;
  border-radius:20px;
  text-align:center;
  font-size:1.8rem;
  font-weight:800;
  color:var(--color-success-border);
  margin:32px 0;
  display:block !important
}
.warning-box{
  background:var(--color-warn-bg);
  border-left:6px solid var(--color-warn-border);
  padding:16px;
  margin:24px 0;
  font-size:1rem;
  color:#92400e;
  border-radius:16px
}
.category-box{
  background:var(--color-surface-alt);
  border:1px solid var(--color-border);
  border-radius:18px;
  padding:20px 22px;
  margin:32px 0
}
.category-title{
  font-weight:700;
  color:#3b82f6;
  margin-bottom:20px;
  font-size:1.35rem;
  border-bottom:1px solid #e2e8f0;
  padding-bottom:10px
}
.hidden{display:none}
.summary-box{
  background:#f8fafc;
  border:1px solid #e2e8f0;
  padding:32px;
  border-radius:20px;
  margin:32px 0;
  white-space:pre-line;
  font-family:monospace;
  font-size:1.1rem;
  color:#1e293b
}
.confirm-box{
  background:#fef3c7;
  border-left:6px solid #f59e0b;
  padding:20px;
  margin:28px 0;
  font-size:1.1rem;
  color:#92400e;
  border-radius:16px
}
.required-star{color:#ef4444}
.mandatory-text{color:#10b981;font-weight:600}
#fixedIptv .device-item{background:var(--color-success-bg);border:2px solid var(--color-success-border)}
#fixedIptv .device-name,#fixedIptv .price{color:var(--color-success-border) !important;font-weight:600}
.info-wrapper{position:relative;display:inline-flex}
.info-icon{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:32px;
  height:32px;
  border-radius:50%;
  background:var(--color-primary);
  color:white;
  font-size:1.1rem;
  font-weight:bold;
  cursor:pointer;
  transition:0.3s
}
.info-icon:hover{background:var(--color-primary-hover)}
.tooltip{
  position:fixed;
  padding:14px 18px;
  background:#111c28;
  color:#f8fafc; /* ensure readable on dark tooltip bg */
  font-size:1rem;
  line-height:1.6;
  border-radius:16px;
  white-space:normal;
  word-wrap:break-word;
  box-shadow:0 6px 20px rgba(0,0,0,0.55);
  opacity:0;
  visibility:hidden;
  transition:opacity .2s;
  z-index:1000;
  max-width:280px;
  width:max-content;
  text-align:center;
  border:1px solid #0b1220;
  pointer-events:none
}
.tooltip.visible{opacity:1;visibility:visible}
.tooltip::after{
  content:'';
  position:absolute;
  width:0;
  height:0;
  border:7px solid transparent
}
.tooltip.above::after{border-top-color:#0b1220;bottom:-14px;left:50%;transform:translateX(-50%)}
.tooltip.below::after{border-bottom-color:#0b1220;top:-14px;left:50%;transform:translateX(-50%)}
.no-product-warning{
  background:#fee2e2;
  border:1px solid #fca5a5;
  color:#7f1d1d;
  padding:12px;
  border-radius:12px;
  text-align:center;
  margin-top:12px;
}
@media (max-width:480px){
  .device-item{padding:12px !important}
  .device-top{gap:8px !important;flex-wrap:wrap !important}
  .checkbox-group{gap:8px !important;flex-wrap:wrap !important}
  .checkbox-group input[type="checkbox"]{flex-shrink:0 !important}
  .device-name{font-size:0.84rem !important;line-height:1.3 !important;display:-webkit-box !important;-webkit-line-clamp:2 !important;line-clamp:2 !important;-webkit-box-orient:vertical !important;overflow:hidden !important;text-overflow:ellipsis !important;word-break:break-word !important;hyphens:auto !important;max-width:155px !important;flex-shrink:1 !important}
  .device-name{line-clamp:2}
  .info-icon{width:22px;height:22px;font-size:0.8rem}
  .tooltip{font-size:0.95rem !important;padding:12px 14px !important;max-width:220px !important}
}
@media (max-width: 480px) {
  .header { padding: 20px 16px !important; }
  .header h1 { font-size: 1.6rem !important; }
  .content { padding: 20px 16px !important; }
  .referral-text {
    font-size: 1.1rem !important;
    padding: 16px 12px !important;
    margin: 0 auto 16px !important;
  }
  .referral-text strong { font-size: 1.3rem !important; color:#ffffff !important; }
  .logo-slider { padding: 16px 0 !important; margin: 8px 0 !important; }
  .logo-slider .swiper-slide { height: 60px !important; }
  .logo-slider img { max-height: 32px !important; }
  .submit-btn {
    padding: 16px !important;
    font-size: 1.3rem !important;
    margin: 12px auto 0 !important;
  }
  .logo-slider img {
    width: 120px !important;
    height: 60px !important;
    max-height: none !important;
  }
}

/* Desktop / large screen adjustments */
/* Responsive wider layout */
@media (min-width: 1024px) {
  body { padding: 48px; }
  .container{ max-width:1040px; margin:32px auto; }
  .content{ padding:44px 40px 60px; }
  .logo-slider .swiper-slide{ height:110px; }
  #form.form-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:28px;}
  #form.form-grid .section{margin-bottom:12px;}
  #form.form-grid .section h2{grid-column:1/-1;margin-bottom:8px;}
  #form.form-grid textarea{grid-column:1/-1;}
}

@media (max-width:480px){
  .tooltip{max-width:90%;}
}

/* THEME VARIANTS */
[data-theme="light-refined"]{
  --color-bg:#f5f7fa;
  --color-surface:#ffffff;
  --color-surface-alt:#f8fafc;
  --color-border:#e3e8ef;
  --color-text:#1f2937;
  --color-text-muted:#475569;
  --color-primary:#3b82f6;
  --color-primary-hover:#2563eb;
  --color-accent:#0ea66d;
  --color-warn-bg:#fff8e1;
  --color-warn-border:#f59e0b;
  --color-success-bg:#ecfdf5;
  --color-success-border:#10b981;
  --logo-surface:#ffffff;
}

/* Improve tooltip contrast in light theme */
[data-theme="light-refined"] .tooltip{background:#0f172a;color:#f1f5f9;border-color:#0b1220}
[data-theme="light-refined"] .tooltip.above::after{border-top-color:#0b1220}
[data-theme="light-refined"] .tooltip.below::after{border-bottom-color:#0b1220}

[data-theme="soft-dark"]{
  --color-bg:#121a24;
  --color-surface:#19232e;
  --color-surface-alt:#202c38;
  --color-border:#2d3a46;
  --color-text:#e6edf3;
  --color-text-muted:#c2cbd3;
  --color-primary:#3b86f8;
  --color-primary-hover:#2d6fcf;
  --color-accent:#0ea66d;
  --color-warn-bg:#3a2c10;
  --color-warn-border:#f59e0b;
  --color-success-bg:#0f2c22;
  --color-success-border:#1cc989;
  --logo-surface:#f3f6fa;
}

[data-theme="hybrid"]{
  --color-bg:#eef2f6;
  --color-surface:#ffffff;
  --color-surface-alt:#f9fbfd;
  --color-border:#e3e8ef;
  --color-text:#111827;
  --color-text-muted:#4b5563;
  --color-primary:#3578e5;
  --color-primary-hover:#2a62be;
  --color-accent:#0ea66d;
  --color-warn-bg:#fff7e6;
  --color-warn-border:#f59e0b;
  --color-success-bg:#ecfdf5;
  --color-success-border:#10b981;
  --logo-surface:#ffffff;
}

[data-theme="minimal"]{
  --color-bg:#ffffff;
  --color-surface:#ffffff;
  --color-surface-alt:#ffffff;
  --color-border:#dadfe5;
  --color-text:#222222;
  --color-text-muted:#525252;
  --color-primary:#1f2937;
  --color-primary-hover:#111827;
  --color-accent:#1f2937;
  --color-warn-bg:#fff8e1;
  --color-warn-border:#eab308;
  --color-success-bg:#f7fef9;
  --color-success-border:#16a34a;
  --logo-surface:#ffffff;
}

/* Floating cart bubble */
.cart-bubble{
  position:fixed;
  right:20px;
  bottom:20px;
  z-index:1200;
  display:flex;
  align-items:flex-end;
  gap:8px;
  pointer-events:none; /* enable only on children */
}
.cart-bubble .cart-btn{
  pointer-events:auto;
  display:flex;
  align-items:center;
  gap:8px;
  background:#3b82f6;
  color:#fff;
  border:none;
  border-radius:999px;
  padding:12px 16px;
  box-shadow:0 10px 30px rgba(16,185,129,0.12);
  cursor:pointer;
  font-weight:700;
}
.cart-bubble .cart-btn:focus{outline:3px solid rgba(59,130,246,0.25)}
.cart-bubble .cart-icon{font-size:1.15rem}
.cart-bubble .cart-amount{font-size:0.95rem}

.cart-panel{
  pointer-events:auto;
  margin-right:8px;
  background: #111827;
  color:#f8fafc;
  border-radius:12px;
  padding:12px;
  min-width:180px;
  box-shadow:0 10px 30px rgba(2,6,23,0.6);
  transform:translateY(6px);
  transition:opacity .18s, transform .18s;
}
.cart-panel.hidden{opacity:0;visibility:hidden;transform:translateY(10px)}
.cart-panel .cart-panel-row{margin-bottom:8px}
.cart-panel .cart-panel-actions{display:flex;justify-content:flex-end}
.cart-panel .submit-btn{padding:8px 12px;font-size:0.95rem}

/* show panel when parent has :hover or when panel is focused */
.cart-bubble:hover .cart-panel,
.cart-bubble:focus-within .cart-panel{opacity:1;visibility:visible;transform:translateY(0);}

/* Mobile / touch devices: smaller cart and align to top-right
   Widened breakpoint to cover high-density phones and small tablets.
   Added (hover: none) so touch-only devices pick up this layout even
   if their CSS pixel width exceeds the narrow threshold. */
@media (max-width: 768px), (hover: none) {
  .cart-bubble{
    right:12px;
    left:auto;
    top:12px;
    bottom:auto;
    align-items:flex-start;
  }
  .cart-bubble .cart-btn{
    padding:8px 10px;
    font-size:0.92rem;
    border-radius:10px;
  }
  .cart-bubble .cart-icon{font-size:0.95rem}
  .cart-bubble .cart-amount{font-size:0.8rem}
  .cart-panel{
    min-width:140px;
    margin-right:0;
    margin-top:8px; /* appear below the button */
  }
}
